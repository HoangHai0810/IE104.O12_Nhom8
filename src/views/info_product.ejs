<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>DLATT Fashion</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="./css/style.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./css/info_product.css">
</head>



<body>
    <!--Phần thanh header-->
    <header>
        <div class="header-container fixed">
            <div class="header-main">
                <div class="container">
                    <div class="toggle">
                        <i class="fa-solid fa-bars menu"></i>
                        <div id="logo-toggle">
                            <a href="#">
                                <img src="./img/logo.png" title="DLATT Fashion" class="img-product"
                                    style="width: 200px;">
                            </a>
                        </div>
                        <div class="btn-toggle">
                            <div id="search-toggle">
                                <span class="search_button">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </span>
                            </div>
                            <div class="myaccount-toggle">
                                <a href="/account" title="My Account">  
                                    <i class="fa-solid fa-user"></i>
                            </div>
                            <div class="header-shoppingcart-toggle">
                                <a href="/cart" title="Cart"></a>
                                <i class="fa-solid fa-cart-shopping"></i>
                            </div>
                        </div>
                    </div>
                    <ul class="navbar-nav-toggle">
                        <li class="top_level dropdown">
                            <a href="/man">Nam</a>
                        </li>
                        <li class="top_level dropdown">
                            <a href="/woman">Nữ</a>
                        </li>
                        <li class="top_level">
                            <a href="/hotitem">Bán chạy</a>
                        </li>
                        <li class="top_level">
                            <a href="/sale">Giảm giá</a>
                        </li>
                        <li class="top_level dropdown">
                            <a href="/more">Xem thêm</a>
                        </li>
                    </ul>
                    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
                    <script>
                        $(document).ready(function() 
                            {
                                $('.menu').click(function() {
                                    $('.navbar-nav-toggle').toggleClass('active')
                                })
                            }
                        )
                    </script>
                    <div class="row">
                        <div class="header-logo">
                            <div id="logo">
                                <a href="/">
                                    <img src="./img/logo.png" title="DLATT Fashion" class="img-product"
                                        style="width: 200px;">
                                </a>
                            </div>
                        </div>
                        <nav class="nav-container">
                            <div id="menu" class="main-menu" style="display: block;">
                                <ul class="nav navbar-nav">
                                    <li class="top_level dropdown">
                                        <a href="/men">Nam</a>
                                        <div class="dropdown-menu megamenu column3">
                                            <div class="dropdown-inner">
                                                <ul class="list-unstyled childs_1">
                                                    <li class="dropdown">
                                                        <a href="/menShirts">Áo</a>
                                                        <div class="dropdown-menu">
                                                            <div class="dr  opdown-inner">
                                                                <ul class="list-unstyled childs_2">
                                                                    <li>
                                                                        <a href="/menSweater">Áo Sweater Nam</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/menTankTop">Áo ba lỗ Nam</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/menTShirt">Áo thun nam</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/menJacket">Áo khoác nam</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                                <ul class="list-unstyled childs_1">
                                                    <li class="dropdown">
                                                        <a href="/menTrousers">Quần</a>
                                                        <div class="dropdown-menu">
                                                            <div class="dropdown-inner">
                                                                <ul class="list-unstyled childs_2">
                                                                    <li>
                                                                        <a href="/menKaki">Quần kaki nam</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/menShorts">Quần đùi nam </a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/menJean">Quần jean nam</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/menUnderwear">Quần lót nam</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="top_level dropdown">
                                        <a href="/women">Nữ</a>
                                        <div class="dropdown-menu megamenu column3">
                                            <div class="dropdown-inner">
                                                <ul class="list-unstyled childs_1">
                                                    <li class="dropdown">
                                                        <a href="/womenShirts">Áo</a>
                                                        <div class="dropdown-menu">
                                                            <div class="dropdown-inner">
                                                                <ul class="list-unstyled childs_2">
                                                                    <li>
                                                                        <a href="/womenShirt">Áo thun nữ</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/womenTShirt">Áo sơ mi nữ </a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/womenDress">Đầm nữ</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/womenJacket">Áo khoác nữ</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                                <ul class="list-unstyled childs_1">
                                                    <li class="dropdown">
                                                        <a href="/womenTrousers">Quần</a>
                                                        <div class="dropdown-menu">
                                                            <div class="dropdown-inner">
                                                                <ul class="list-unstyled childs_2">
                                                                    <li>
                                                                        <a href="/womenPants">Quần dài nữ</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/womenShorts">Quần đùi nữ</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/womenJeans">Quần jean nữ</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="/womenAuthPants">Quần tây nữ</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="top_level">
                                        <a href="/hotitem">Bán chạy</a>
                                    </li>
                                    <li class="top_level">
                                        <a href="/sale">Giảm giá</a>
                                    </li>
                                    <li class="top_level dropdown">
                                        <a href="/more">Xem thêm</a>
                                        <div class="dropdown-menu megamenu column1" style="height: 120px">
                                            <div class="dropdown-inner">
                                                <ul class="list-unstyled childs_1">
                                                    <li>
                                                        <a href="/shoes">Giày</a>
                                                    </li>
                                                    <li>
                                                        <a href="/glasses">Kính</a>
                                                    </li>
                                                    <li>
                                                        <a href="/socks">Tất</a>
                                                    </li>
                                                    <li>
                                                        <a href="hats">Mũ</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </nav>
                        <div id="search" class="input-group">
                            <span class="search_button"><i class="fa-solid fa-magnifying-glass"></i></span>
                            <div class="search_toggle">
                                <div id="searchbox">
                                    <input type="text" name="search" value="" placeholder="Search Products Here"
                                        class="form-control input-lg">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default btn-lg">
                                            Search
                                            <i class="fa-solid fa-magnifying-glass"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <% if (logins.length > 0) { %>
                        <div class="dropdown myaccount" style="width: 200px">
                            <a href="/account" title="My Account" style="width: 100%">
                                <i class="fa-solid fa-user"></i>
                                    <span class="userName" ><%=logins[0].fullName%></span>
                        <% } else { %>
                        <div class="dropdown myaccount">
                            <a href="/account" title="My Account" style="width: 100%">
                                <i class="fa-solid fa-user"></i>
                                <% } %>
                                <ul class="dropdown-menu dropdown-menu-right myaccount-menu">
                                    <% if (logins.length == 0) { %>
                                    <li>
                                        <a href="/register">Đăng kí</a>
                                    </li>
                                    <li>
                                        <a href="/login">Đăng nhập</a>
                                    </li>
                                    <% }  else { %>
                                    <li>
                                        <a href="/logout">Đăng xuất</a>
                                    </li>
                                    <% } %>
                                    <li>
                                        <a href="/cart" title="Shopping Cart">Giỏ hàng</a>
                                    </li>
                                    <li>
                                        <a href="/checkout" title="Checkout">Thanh toán</a>
                                    </li>
                                    <% if (logins.length > 0 && logins[0].role === 'Employee') { %>
                                    <li>
                                        <a href="/upload" title="Checkout">Thêm sản phẩm</a>
                                    </li>
                                    <% } %>
                                </ul>
                        </div>
                        <div class="header-shoppingcart">
                            <div id="cart" class="btn-group btn-block">
                                <a href="/cart" title="Cart">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!--Content cua website:-->
    <div class="container" style="margin-top: 100px;">
        <div class="block">
            <div class="block-title" style="padding: 30px;">
                <strong>THÔNG TIN SẢN PHẨM</strong>
            </div>
            <div class="row wraper">
                <div class="col-5 thumnails">
                    <div id="myCarousel" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="product_img" src="./img/<%=product.productID%>0.png">
                            </div>
                            <% for (let i=1;i<imageCount; i++) { %>
                            <div class="carousel-item">
                                <img class="thumnails_img"
                                src="./img/<%=product.productID%><%=i%>.png">
                            </div>
                            <% } %>    
                        </div>
                        <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                <script>
                    $(document).ready(function(){
                        $('#myCarousel').carousel({
                            interval: 3000,
                            pause: 'hover',
                            infinity: true,
                        });
                    });
                </script>
                <div class="col-7 details">
                    <div class="rows">
                        <p><%= product.productName  %></p>
                    </div>
                    <div class="rows">
                        <p>Giá: <%= product.price%></p>
                    </div>
                    <div class="rows">
                        <p class="color">Màu sắc:</p>
                        <% for (let i =0; i< Product_Color.length; i++) 
                        if (Product_Color[i].productID === product.productID) { %>
                            <button class="color_btn" style="--color: <%=Product_Color[i].colorID %>;" onclick="toggleActive(this)"></button>
                        <% } %>
                        <script>
                            function toggleActive(button) {
                                var buttons = document.querySelectorAll('.color_btn');
                                buttons.forEach(function (btn) {
                                    btn.classList.remove('active');
                                });

                                button.classList.add('active');
                            }

                            //Hàm lấy màu đã chọn
                            function getSelectedColor() {
                                var activeButton = document.querySelector('.color_btn.active');

                                if (activeButton) {
                                    var selectedColor = window.getComputedStyle(activeButton).getPropertyValue('--color');
                                    console.log("Màu đã chọn: " + selectedColor);
                                    return selectedColor;
                                } else {
                                    console.log("Không có màu nào được chọn.");
                                    return null;
                                }
                            }
                        </script>
                        <div class="rows">
                            <button class="btn-outline-dark btn-sm" onclick="showMessage()" data-toggle="collapse"
                                href="#moTaSanPham" role="button" aria-expanded="false" aria-controls="moTaSanPham">Xem
                                mô tả sản phẩm</button>

                            <p id="message" style="display: none;"><%= product.description %>
                            </p>

                            <script>
                                function showMessage() {
                                    var message = document.getElementById("message");

                                    if (message.style.display === "none" || message.style.display === "") {
                                        message.style.display = "block";
                                    } else {
                                        message.style.display = "none";
                                    }
                                }
                            </script>
                        </div>
                    </div>
                    <div class="row buy">
                        <label for="quantity">Số lượng:</label>
                        <div class="product-quantity">
                            <button type="button" class="btn-minus">-</button>
                            <input type="text" id="quantity" value="1" min="1" max="10">
                            <button type="button" class="btn-plus">+</button>
                        </div>
                        <% if (logins.length > 0) { %>
                        <button type="submit" onclick="addToCart()" class="btn_buy" id="btn_buy_now">THÊM VÀO GIỎ HÀNG</button>
                        <%} else {%>
                        <button type="submit" onclick="buyNow()" class="btn_buy" id="btn_buy_now">MUA NGAY</button>
                        <%}%>
                        <form id="buyNowReq" action="/postCart" method="post">
                            <input type="hidden" id="productID" name="productID" value="<%=product.productID%>">
                            <input type="hidden" id="colorID" name="colorID">
                            <!-- <input type="hidden" id="sizeID" name="sizeID"> -->
                            <input type="hidden" id="userID" name="userID">
                        </form>
                    </div>
                    <script>
                        let logins = JSON.parse(unescape('<%- logins %>'));
                        var buyNowBtn = document.getElementById('btn_buy_now');
                        let form = document.getElementById('buyNowReq');
                        function buyNow() {
                            alert('Buy cc');
                        }
                        function addToCart() {
                            document.getElementById('colorID').value = getSelectedColor();
                            // document.getElementById('sizeID').value = getSelectedSize();
                            document.getElementById('userID').value = logins[0].userID;
                            form.submit();
                            alert('Đã thêm vào giỏ hàng!')
                        }
                        
                        function increaseQuantity() {
                            var quantity = document.querySelector("#quantity").value;
                            quantity++;
                            document.querySelector("#quantity").value = quantity;
                          }
                          
                          // Hàm để giảm số lượng sản phẩm
                          function decreaseQuantity() {
                            var quantity = document.querySelector("#quantity").value;
                            quantity--;
                            if (quantity < 1) {
                              quantity = 1;
                            }
                            document.querySelector("#quantity").value = quantity;
                          }
                          
                          // Thêm sự kiện click cho nút tăng số lượng
                          document.querySelector(".btn-plus").addEventListener("click", increaseQuantity);
                          
                          // Thêm sự kiện click cho nút giảm số lượng
                          document.querySelector(".btn-minus").addEventListener("click", decreaseQuantity);

                    </script>
                </div>
            </div>
        </div>
    </div>
    <!--Footer-->
    <footer class="footer">
        <div class="footer_row">
            <div class="footer_infomation">
                <div class="logo">
                    <a href="#">
                        <img src="./img/logo.png" alt="DLATT">
                    </a>
                </div>
                <h3>CÔNG TY TNHH DLATT VIETNAM</h3>
            </div>
            <div class="group">
                <h3>IE104.012 - Nhóm 8</h3>
                <div class="members">
                    <div class="card">
                        <div class="img">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTymz8hEzCiURnEoQYnLTiehMAGb4xIeKWRDQ&usqp=CAU"
                                alt="">
                        </div>
                        <div class="glass">
                            <span>Hoàng Hải Anh</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="img">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTymz8hEzCiURnEoQYnLTiehMAGb4xIeKWRDQ&usqp=CAU"
                                alt="">
                        </div>
                        <div class="glass">
                            <span>Nguyễn Chí Thi</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="img">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTymz8hEzCiURnEoQYnLTiehMAGb4xIeKWRDQ&usqp=CAU"
                                alt="">
                        </div>
                        <div class="glass">
                            <span>Trương Khánh Long</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="img">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTymz8hEzCiURnEoQYnLTiehMAGb4xIeKWRDQ&usqp=CAU"
                                alt="">
                        </div>
                        <div class="glass">
                            <span>Bùi Lê Trọng Đức</span>

                        </div>
                    </div>
                    <div class="card">
                        <div class="img">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTymz8hEzCiURnEoQYnLTiehMAGb4xIeKWRDQ&usqp=CAU"
                                alt="">
                        </div>
                        <div class="glass">
                            <span>Nguyễn Tiến Thịnh</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>

</html>